<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>5.1 Solutions | Psyc 6300: Data Management</title>
  <meta name="description" content="This is an introduction to R as a statistical package for psychological research." />
  <meta name="generator" content="bookdown 0.12 and GitBook 2.6.7" />

  <meta property="og:title" content="5.1 Solutions | Psyc 6300: Data Management" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is an introduction to R as a statistical package for psychological research." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="5.1 Solutions | Psyc 6300: Data Management" />
  
  <meta name="twitter:description" content="This is an introduction to R as a statistical package for psychological research." />
  

<meta name="author" content="James Rigby" />


<meta name="date" content="2019-10-13" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="activity.html">
<link rel="next" href="combining-data-sets.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./"Psyc 6300</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="prerequisites.html"><a href="prerequisites.html"><i class="fa fa-check"></i><b>1.1</b> Prerequisites</a></li>
<li class="chapter" data-level="1.2" data-path="supplemental-resources.html"><a href="supplemental-resources.html"><i class="fa fa-check"></i><b>1.2</b> Supplemental Resources</a></li>
<li class="chapter" data-level="1.3" data-path="acknowledgements.html"><a href="acknowledgements.html"><i class="fa fa-check"></i><b>1.3</b> Acknowledgements</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="material-overview.html"><a href="material-overview.html"><i class="fa fa-check"></i><b>2</b> Material Overview</a></li>
<li class="part"><span><b>I Introduction to Dplyr</b></span></li>
<li class="chapter" data-level="3" data-path="what-is-dplyr.html"><a href="what-is-dplyr.html"><i class="fa fa-check"></i><b>3</b> What is dplyr?</a><ul>
<li class="chapter" data-level="3.1" data-path="why-is-data-manipulation-important.html"><a href="why-is-data-manipulation-important.html"><i class="fa fa-check"></i><b>3.1</b> Why is Data Manipulation Important?</a><ul>
<li class="chapter" data-level="3.1.1" data-path="why-is-data-manipulation-important.html"><a href="why-is-data-manipulation-important.html#example-1-survey-data"><i class="fa fa-check"></i><b>3.1.1</b> Example 1: Survey Data</a></li>
<li class="chapter" data-level="3.1.2" data-path="why-is-data-manipulation-important.html"><a href="why-is-data-manipulation-important.html#whats-wrong-with-the-survey-data"><i class="fa fa-check"></i><b>3.1.2</b> What’s Wrong With the Survey Data?</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="this-isnt-relevant-to-me-my-research-is-experimental.html"><a href="this-isnt-relevant-to-me-my-research-is-experimental.html"><i class="fa fa-check"></i><b>3.2</b> This Isn’t Relevant to Me - My Research is Experimental!</a><ul>
<li class="chapter" data-level="3.2.1" data-path="this-isnt-relevant-to-me-my-research-is-experimental.html"><a href="this-isnt-relevant-to-me-my-research-is-experimental.html#example-2-experimental-data"><i class="fa fa-check"></i><b>3.2.1</b> Example 2: Experimental Data</a></li>
<li class="chapter" data-level="3.2.2" data-path="this-isnt-relevant-to-me-my-research-is-experimental.html"><a href="this-isnt-relevant-to-me-my-research-is-experimental.html#whats-wrong-with-the-experimental-data"><i class="fa fa-check"></i><b>3.2.2</b> What’s Wrong With the Experimental Data?</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="take-aways.html"><a href="take-aways.html"><i class="fa fa-check"></i><b>3.3</b> Take-Aways</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="core-dplyr-functions.html"><a href="core-dplyr-functions.html"><i class="fa fa-check"></i><b>4</b> Core dplyr Functions</a><ul>
<li class="chapter" data-level="4.1" data-path="form.html"><a href="form.html"><i class="fa fa-check"></i><b>4.1</b> dplyr Function Structure</a></li>
<li class="chapter" data-level="4.2" data-path="filter.html"><a href="filter.html"><i class="fa fa-check"></i><b>4.2</b> filter(): Retaining Rows</a><ul>
<li class="chapter" data-level="4.2.1" data-path="filter.html"><a href="filter.html#filter-structure"><i class="fa fa-check"></i><b>4.2.1</b> filter() Structure</a></li>
<li class="chapter" data-level="4.2.2" data-path="filter.html"><a href="filter.html#using-filter"><i class="fa fa-check"></i><b>4.2.2</b> Using filter()</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="select-choosing-columns.html"><a href="select-choosing-columns.html"><i class="fa fa-check"></i><b>4.3</b> select(): Choosing Columns</a><ul>
<li class="chapter" data-level="4.3.1" data-path="select-choosing-columns.html"><a href="select-choosing-columns.html#select-structure"><i class="fa fa-check"></i><b>4.3.1</b> select() Structure</a></li>
<li class="chapter" data-level="4.3.2" data-path="select-choosing-columns.html"><a href="select-choosing-columns.html#useful-helper-functions-for-select"><i class="fa fa-check"></i><b>4.3.2</b> Useful Helper Functions for select()</a></li>
<li class="chapter" data-level="4.3.3" data-path="select-choosing-columns.html"><a href="select-choosing-columns.html#using-select"><i class="fa fa-check"></i><b>4.3.3</b> Using select()</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="rename-renaming-variables.html"><a href="rename-renaming-variables.html"><i class="fa fa-check"></i><b>4.4</b> rename(): Renaming Variables</a><ul>
<li class="chapter" data-level="4.4.1" data-path="rename-renaming-variables.html"><a href="rename-renaming-variables.html#rename-structure"><i class="fa fa-check"></i><b>4.4.1</b> rename() Structure</a></li>
<li class="chapter" data-level="4.4.2" data-path="rename-renaming-variables.html"><a href="rename-renaming-variables.html#using-rename"><i class="fa fa-check"></i><b>4.4.2</b> Using rename()</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="mutate-creating-new-variables.html"><a href="mutate-creating-new-variables.html"><i class="fa fa-check"></i><b>4.5</b> mutate(): Creating New Variables</a><ul>
<li class="chapter" data-level="4.5.1" data-path="mutate-creating-new-variables.html"><a href="mutate-creating-new-variables.html#mutate-structure"><i class="fa fa-check"></i><b>4.5.1</b> mutate() Structure</a></li>
<li class="chapter" data-level="4.5.2" data-path="mutate-creating-new-variables.html"><a href="mutate-creating-new-variables.html#helper-functions"><i class="fa fa-check"></i><b>4.5.2</b> Helper Functions</a></li>
<li class="chapter" data-level="4.5.3" data-path="mutate-creating-new-variables.html"><a href="mutate-creating-new-variables.html#using-mutate"><i class="fa fa-check"></i><b>4.5.3</b> Using mutate()</a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="the-pipe-operator.html"><a href="the-pipe-operator.html"><i class="fa fa-check"></i><b>4.6</b> The Pipe Operator (%&gt;%)</a><ul>
<li class="chapter" data-level="4.6.1" data-path="the-pipe-operator.html"><a href="the-pipe-operator.html#structure-of-the-pipe-operator"><i class="fa fa-check"></i><b>4.6.1</b> Structure of the Pipe Operator</a></li>
<li class="chapter" data-level="4.6.2" data-path="the-pipe-operator.html"><a href="the-pipe-operator.html#using-the-pipe-operator"><i class="fa fa-check"></i><b>4.6.2</b> Using the pipe operator</a></li>
</ul></li>
<li class="chapter" data-level="4.7" data-path="group.html"><a href="group.html"><i class="fa fa-check"></i><b>4.7</b> group_by(): Grouping Data Frames</a><ul>
<li class="chapter" data-level="4.7.1" data-path="group.html"><a href="group.html#group_by-structure"><i class="fa fa-check"></i><b>4.7.1</b> group_by Structure</a></li>
<li class="chapter" data-level="4.7.2" data-path="group.html"><a href="group.html#using-group_by"><i class="fa fa-check"></i><b>4.7.2</b> Using group_by()</a></li>
</ul></li>
<li class="chapter" data-level="4.8" data-path="sum.html"><a href="sum.html"><i class="fa fa-check"></i><b>4.8</b> summarise(): Creating Data Summaries</a><ul>
<li class="chapter" data-level="4.8.1" data-path="sum.html"><a href="sum.html#summarise-structure"><i class="fa fa-check"></i><b>4.8.1</b> summarise() Structure</a></li>
<li class="chapter" data-level="4.8.2" data-path="sum.html"><a href="sum.html#using-summarise"><i class="fa fa-check"></i><b>4.8.2</b> Using summarise()</a></li>
</ul></li>
<li class="chapter" data-level="4.9" data-path="arrange-ordering-rows.html"><a href="arrange-ordering-rows.html"><i class="fa fa-check"></i><b>4.9</b> arrange(): Ordering Rows</a><ul>
<li class="chapter" data-level="4.9.1" data-path="arrange-ordering-rows.html"><a href="arrange-ordering-rows.html#arrange-structure"><i class="fa fa-check"></i><b>4.9.1</b> arrange() Structure</a></li>
<li class="chapter" data-level="4.9.2" data-path="arrange-ordering-rows.html"><a href="arrange-ordering-rows.html#using-arrange"><i class="fa fa-check"></i><b>4.9.2</b> Using arrange()</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="activity.html"><a href="activity.html"><i class="fa fa-check"></i><b>5</b> Activity</a><ul>
<li class="chapter" data-level="5.1" data-path="solutions.html"><a href="solutions.html"><i class="fa fa-check"></i><b>5.1</b> Solutions</a></li>
</ul></li>
<li class="part"><span><b>II Combining Data Frames</b></span></li>
<li class="chapter" data-level="6" data-path="combining-data-sets.html"><a href="combining-data-sets.html"><i class="fa fa-check"></i><b>6</b> Combining Data Sets</a></li>
<li class="chapter" data-level="7" data-path="binding-functions.html"><a href="binding-functions.html"><i class="fa fa-check"></i><b>7</b> Binding Functions</a><ul>
<li class="chapter" data-level="7.1" data-path="bind-cols-binding-data-frames-horizontally.html"><a href="bind-cols-binding-data-frames-horizontally.html"><i class="fa fa-check"></i><b>7.1</b> bind_cols(): Binding Data Frames Horizontally</a><ul>
<li class="chapter" data-level="7.1.1" data-path="bind-cols-binding-data-frames-horizontally.html"><a href="bind-cols-binding-data-frames-horizontally.html#bind_cols-structure"><i class="fa fa-check"></i><b>7.1.1</b> bind_cols() Structure</a></li>
<li class="chapter" data-level="7.1.2" data-path="bind-cols-binding-data-frames-horizontally.html"><a href="bind-cols-binding-data-frames-horizontally.html#using-bind_cols"><i class="fa fa-check"></i><b>7.1.2</b> Using bind_cols()</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="bind-rows-binding-data-frames-vertically.html"><a href="bind-rows-binding-data-frames-vertically.html"><i class="fa fa-check"></i><b>7.2</b> bind_rows(): Binding Data Frames Vertically</a><ul>
<li class="chapter" data-level="7.2.1" data-path="bind-rows-binding-data-frames-vertically.html"><a href="bind-rows-binding-data-frames-vertically.html#bind_rows-structure"><i class="fa fa-check"></i><b>7.2.1</b> bind_rows() Structure</a></li>
<li class="chapter" data-level="7.2.2" data-path="bind-rows-binding-data-frames-vertically.html"><a href="bind-rows-binding-data-frames-vertically.html#using-bind_rows"><i class="fa fa-check"></i><b>7.2.2</b> Using bind_rows()</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="mutating-joins.html"><a href="mutating-joins.html"><i class="fa fa-check"></i><b>8</b> Mutating Joins</a><ul>
<li class="chapter" data-level="8.1" data-path="joinform.html"><a href="joinform.html"><i class="fa fa-check"></i><b>8.1</b> Join Functions: Structural Form</a></li>
<li class="chapter" data-level="8.2" data-path="full-join.html"><a href="full-join.html"><i class="fa fa-check"></i><b>8.2</b> full_join()</a></li>
<li class="chapter" data-level="8.3" data-path="left.html"><a href="left.html"><i class="fa fa-check"></i><b>8.3</b> left_join()</a></li>
<li class="chapter" data-level="8.4" data-path="right-join.html"><a href="right-join.html"><i class="fa fa-check"></i><b>8.4</b> right_join()</a></li>
<li class="chapter" data-level="8.5" data-path="inner-join.html"><a href="inner-join.html"><i class="fa fa-check"></i><b>8.5</b> inner_join()</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="filtering-joins.html"><a href="filtering-joins.html"><i class="fa fa-check"></i><b>9</b> Filtering Joins</a><ul>
<li class="chapter" data-level="9.1" data-path="semi-join.html"><a href="semi-join.html"><i class="fa fa-check"></i><b>9.1</b> semi_join()</a></li>
<li class="chapter" data-level="9.2" data-path="anti-join.html"><a href="anti-join.html"><i class="fa fa-check"></i><b>9.2</b> anti_join()</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="activity-1.html"><a href="activity-1.html"><i class="fa fa-check"></i><b>10</b> Activity</a></li>
<li class="part"><span><b>III Advanced Dplyr</b></span></li>
<li class="chapter" data-level="11" data-path="other-functions-for-extracting-observations.html"><a href="other-functions-for-extracting-observations.html"><i class="fa fa-check"></i><b>11</b> Other Functions for Extracting Observations</a><ul>
<li class="chapter" data-level="11.1" data-path="random-samples-of-observations.html"><a href="random-samples-of-observations.html"><i class="fa fa-check"></i><b>11.1</b> Random Samples of Observations</a><ul>
<li class="chapter" data-level="11.1.1" data-path="random-samples-of-observations.html"><a href="random-samples-of-observations.html#structural-form-of-sample_-functions"><i class="fa fa-check"></i><b>11.1.1</b> Structural Form of sample_ Functions</a></li>
<li class="chapter" data-level="11.1.2" data-path="random-samples-of-observations.html"><a href="random-samples-of-observations.html#using-sample_n-and-sample_frac"><i class="fa fa-check"></i><b>11.1.2</b> Using sample_n() and sample_frac()</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="distinct-extracting-unique-observations.html"><a href="distinct-extracting-unique-observations.html"><i class="fa fa-check"></i><b>11.2</b> distinct(): extracting unique observations</a><ul>
<li class="chapter" data-level="11.2.1" data-path="distinct-extracting-unique-observations.html"><a href="distinct-extracting-unique-observations.html#distinct-structure"><i class="fa fa-check"></i><b>11.2.1</b> distinct() Structure</a></li>
<li class="chapter" data-level="11.2.2" data-path="distinct-extracting-unique-observations.html"><a href="distinct-extracting-unique-observations.html#using-distinct"><i class="fa fa-check"></i><b>11.2.2</b> Using distinct()</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="12" data-path="performing-repeated-operations.html"><a href="performing-repeated-operations.html"><i class="fa fa-check"></i><b>12</b> Performing Repeated Operations</a><ul>
<li class="chapter" data-level="12.1" data-path="all-suffix.html"><a href="all-suffix.html"><i class="fa fa-check"></i><b>12.1</b> all() suffix</a></li>
<li class="chapter" data-level="12.2" data-path="at-suffix.html"><a href="at-suffix.html"><i class="fa fa-check"></i><b>12.2</b> at() suffix</a></li>
<li class="chapter" data-level="12.3" data-path="if-suffix.html"><a href="if-suffix.html"><i class="fa fa-check"></i><b>12.3</b> if() suffix</a></li>
</ul></li>
<li class="part"><span><b>IV Tidy Data with tidyr</b></span></li>
<li class="chapter" data-level="13" data-path="wider-and-longer-data-formats.html"><a href="wider-and-longer-data-formats.html"><i class="fa fa-check"></i><b>13</b> Wider and Longer Data Formats</a><ul>
<li class="chapter" data-level="13.1" data-path="gather-wider-to-longer.html"><a href="gather-wider-to-longer.html"><i class="fa fa-check"></i><b>13.1</b> gather(): Wider to Longer</a><ul>
<li class="chapter" data-level="13.1.1" data-path="gather-wider-to-longer.html"><a href="gather-wider-to-longer.html#gather-structure"><i class="fa fa-check"></i><b>13.1.1</b> gather() Structure</a></li>
<li class="chapter" data-level="13.1.2" data-path="gather-wider-to-longer.html"><a href="gather-wider-to-longer.html#using-gather"><i class="fa fa-check"></i><b>13.1.2</b> Using gather()</a></li>
</ul></li>
<li class="chapter" data-level="13.2" data-path="spread-longer-to-wider.html"><a href="spread-longer-to-wider.html"><i class="fa fa-check"></i><b>13.2</b> spread(): Longer to Wider</a><ul>
<li class="chapter" data-level="13.2.1" data-path="spread-longer-to-wider.html"><a href="spread-longer-to-wider.html#spread-structure"><i class="fa fa-check"></i><b>13.2.1</b> spread() Structure</a></li>
<li class="chapter" data-level="13.2.2" data-path="spread-longer-to-wider.html"><a href="spread-longer-to-wider.html#using-spread"><i class="fa fa-check"></i><b>13.2.2</b> Using spread()</a></li>
</ul></li>
<li class="chapter" data-level="13.3" data-path="recent-developments.html"><a href="recent-developments.html"><i class="fa fa-check"></i><b>13.3</b> Recent Developments</a><ul>
<li class="chapter" data-level="13.3.1" data-path="recent-developments.html"><a href="recent-developments.html#the-problems-with-gather-and-spread"><i class="fa fa-check"></i><b>13.3.1</b> The Problems with gather() and spread()</a></li>
</ul></li>
<li class="chapter" data-level="13.4" data-path="pivot-longer-gathers-predecessor.html"><a href="pivot-longer-gathers-predecessor.html"><i class="fa fa-check"></i><b>13.4</b> pivot_longer(): gather’s() predecessor</a><ul>
<li class="chapter" data-level="13.4.1" data-path="pivot-longer-gathers-predecessor.html"><a href="pivot-longer-gathers-predecessor.html#pivot_longer-structure"><i class="fa fa-check"></i><b>13.4.1</b> pivot_longer() structure</a></li>
<li class="chapter" data-level="13.4.2" data-path="pivot-longer-gathers-predecessor.html"><a href="pivot-longer-gathers-predecessor.html#using-pivot_longer"><i class="fa fa-check"></i><b>13.4.2</b> Using pivot_longer()</a></li>
</ul></li>
<li class="chapter" data-level="13.5" data-path="pivot-wider-spreads-predecessor.html"><a href="pivot-wider-spreads-predecessor.html"><i class="fa fa-check"></i><b>13.5</b> pivot_wider(): spread()’s predecessor</a><ul>
<li class="chapter" data-level="13.5.1" data-path="pivot-wider-spreads-predecessor.html"><a href="pivot-wider-spreads-predecessor.html#pivot_wider-structure"><i class="fa fa-check"></i><b>13.5.1</b> pivot_wider() Structure</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>V Applications of dplyr and tidyr</b></span></li>
<li class="chapter" data-level="14" data-path="formatted-summary-statistics.html"><a href="formatted-summary-statistics.html"><i class="fa fa-check"></i><b>14</b> Formatted Summary Statistics</a><ul>
<li class="chapter" data-level="14.1" data-path="a-quick-review-necessary-base-functions.html"><a href="a-quick-review-necessary-base-functions.html"><i class="fa fa-check"></i><b>14.1</b> A Quick Review: Necessary Base Functions</a></li>
<li class="chapter" data-level="14.2" data-path="beyond-base-r.html"><a href="beyond-base-r.html"><i class="fa fa-check"></i><b>14.2</b> Beyond Base R</a></li>
<li class="chapter" data-level="14.3" data-path="prepping-environment.html"><a href="prepping-environment.html"><i class="fa fa-check"></i><b>14.3</b> Prepping Environment</a></li>
<li class="chapter" data-level="14.4" data-path="inspecting-data.html"><a href="inspecting-data.html"><i class="fa fa-check"></i><b>14.4</b> Inspecting Data</a></li>
<li class="chapter" data-level="14.5" data-path="quick-and-dirty-mean-and-central-tendency.html"><a href="quick-and-dirty-mean-and-central-tendency.html"><i class="fa fa-check"></i><b>14.5</b> Quick and Dirty Mean and Central Tendency</a><ul>
<li class="chapter" data-level="14.5.1" data-path="quick-and-dirty-mean-and-central-tendency.html"><a href="quick-and-dirty-mean-and-central-tendency.html#skim-for-basic-summary-statistics"><i class="fa fa-check"></i><b>14.5.1</b> skim() for Basic Summary Statistics</a></li>
<li class="chapter" data-level="14.5.2" data-path="quick-and-dirty-mean-and-central-tendency.html"><a href="quick-and-dirty-mean-and-central-tendency.html#summarise-for-custom-summary-statistics"><i class="fa fa-check"></i><b>14.5.2</b> summarise() for Custom Summary Statistics</a></li>
</ul></li>
<li class="chapter" data-level="14.6" data-path="quick-and-dirty-measures-of-association.html"><a href="quick-and-dirty-measures-of-association.html"><i class="fa fa-check"></i><b>14.6</b> Quick and Dirty Measures of Association</a><ul>
<li class="chapter" data-level="14.6.1" data-path="quick-and-dirty-measures-of-association.html"><a href="quick-and-dirty-measures-of-association.html#measures-of-association-with-hypothesis-tests"><i class="fa fa-check"></i><b>14.6.1</b> Measures of Association With Hypothesis Tests</a></li>
<li class="chapter" data-level="14.6.2" data-path="quick-and-dirty-measures-of-association.html"><a href="quick-and-dirty-measures-of-association.html#formatted-apa-summary-statistics"><i class="fa fa-check"></i><b>14.6.2</b> Formatted APA Summary Statistics</a></li>
</ul></li>
<li class="chapter" data-level="14.7" data-path="plotting-distributions.html"><a href="plotting-distributions.html"><i class="fa fa-check"></i><b>14.7</b> Plotting distributions</a></li>
</ul></li>
<li class="part"><span><b>VI Additional Excercises</b></span></li>
<li class="chapter" data-level="15" data-path="the-pygmalion-effect-self-efficacy-based-intervention.html"><a href="the-pygmalion-effect-self-efficacy-based-intervention.html"><i class="fa fa-check"></i><b>15</b> The Pygmalion Effect: Self-efficacy based intervention</a><ul>
<li class="chapter" data-level="15.0.1" data-path="the-pygmalion-effect-self-efficacy-based-intervention.html"><a href="the-pygmalion-effect-self-efficacy-based-intervention.html#data-creation-do-not-change"><i class="fa fa-check"></i><b>15.0.1</b> Data Creation (Do Not Change)</a></li>
<li class="chapter" data-level="15.1" data-path="data-manipulation.html"><a href="data-manipulation.html"><i class="fa fa-check"></i><b>15.1</b> Data Manipulation</a><ul>
<li class="chapter" data-level="15.1.1" data-path="data-manipulation.html"><a href="data-manipulation.html#question-1"><i class="fa fa-check"></i><b>15.1.1</b> Question 1</a></li>
<li class="chapter" data-level="15.1.2" data-path="data-manipulation.html"><a href="data-manipulation.html#question-2"><i class="fa fa-check"></i><b>15.1.2</b> Question 2</a></li>
<li class="chapter" data-level="15.1.3" data-path="data-manipulation.html"><a href="data-manipulation.html#question-3"><i class="fa fa-check"></i><b>15.1.3</b> Question 3</a></li>
<li class="chapter" data-level="15.1.4" data-path="data-manipulation.html"><a href="data-manipulation.html#question-4"><i class="fa fa-check"></i><b>15.1.4</b> Question 4</a></li>
<li class="chapter" data-level="15.1.5" data-path="data-manipulation.html"><a href="data-manipulation.html#question-5"><i class="fa fa-check"></i><b>15.1.5</b> Question 5</a></li>
</ul></li>
<li class="chapter" data-level="15.2" data-path="probability-with-dplyr.html"><a href="probability-with-dplyr.html"><i class="fa fa-check"></i><b>15.2</b> Probability with dplyr</a><ul>
<li class="chapter" data-level="15.2.1" data-path="probability-with-dplyr.html"><a href="probability-with-dplyr.html#question-6"><i class="fa fa-check"></i><b>15.2.1</b> Question 6</a></li>
<li class="chapter" data-level="15.2.2" data-path="probability-with-dplyr.html"><a href="probability-with-dplyr.html#question-7"><i class="fa fa-check"></i><b>15.2.2</b> Question 7</a></li>
<li class="chapter" data-level="15.2.3" data-path="probability-with-dplyr.html"><a href="probability-with-dplyr.html#question-8"><i class="fa fa-check"></i><b>15.2.3</b> Question 8</a></li>
<li class="chapter" data-level="15.2.4" data-path="probability-with-dplyr.html"><a href="probability-with-dplyr.html#question-9"><i class="fa fa-check"></i><b>15.2.4</b> Question 9</a></li>
<li class="chapter" data-level="15.2.5" data-path="probability-with-dplyr.html"><a href="probability-with-dplyr.html#question-10"><i class="fa fa-check"></i><b>15.2.5</b> Question 10</a></li>
</ul></li>
<li class="chapter" data-level="15.3" data-path="summary-statistics-with-base-r-and-dplyr.html"><a href="summary-statistics-with-base-r-and-dplyr.html"><i class="fa fa-check"></i><b>15.3</b> Summary Statistics with Base R and Dplyr</a><ul>
<li class="chapter" data-level="15.3.1" data-path="summary-statistics-with-base-r-and-dplyr.html"><a href="summary-statistics-with-base-r-and-dplyr.html#question-11"><i class="fa fa-check"></i><b>15.3.1</b> Question 11</a></li>
<li class="chapter" data-level="15.3.2" data-path="summary-statistics-with-base-r-and-dplyr.html"><a href="summary-statistics-with-base-r-and-dplyr.html#question-12"><i class="fa fa-check"></i><b>15.3.2</b> Question 12</a></li>
<li class="chapter" data-level="15.3.3" data-path="summary-statistics-with-base-r-and-dplyr.html"><a href="summary-statistics-with-base-r-and-dplyr.html#question-13"><i class="fa fa-check"></i><b>15.3.3</b> Question 13</a></li>
<li class="chapter" data-level="15.3.4" data-path="summary-statistics-with-base-r-and-dplyr.html"><a href="summary-statistics-with-base-r-and-dplyr.html#question-14"><i class="fa fa-check"></i><b>15.3.4</b> Question 14</a></li>
<li class="chapter" data-level="15.3.5" data-path="summary-statistics-with-base-r-and-dplyr.html"><a href="summary-statistics-with-base-r-and-dplyr.html#question-15"><i class="fa fa-check"></i><b>15.3.5</b> Question 15</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>VII Solutions to Additional Excercises</b></span></li>
<li class="chapter" data-level="16" data-path="solutions-to-the-pygmalion-effect-self-efficacy-based-intervention.html"><a href="solutions-to-the-pygmalion-effect-self-efficacy-based-intervention.html"><i class="fa fa-check"></i><b>16</b> Solutions to The Pygmalion Effect: Self-efficacy based intervention</a><ul>
<li class="chapter" data-level="16.0.1" data-path="solutions-to-the-pygmalion-effect-self-efficacy-based-intervention.html"><a href="solutions-to-the-pygmalion-effect-self-efficacy-based-intervention.html#data-creation-do-not-change-1"><i class="fa fa-check"></i><b>16.0.1</b> Data Creation (Do Not Change)</a></li>
<li class="chapter" data-level="16.1" data-path="data-manipulation-1.html"><a href="data-manipulation-1.html"><i class="fa fa-check"></i><b>16.1</b> Data Manipulation</a><ul>
<li class="chapter" data-level="16.1.1" data-path="data-manipulation-1.html"><a href="data-manipulation-1.html#question-1-1"><i class="fa fa-check"></i><b>16.1.1</b> Question 1</a></li>
<li class="chapter" data-level="16.1.2" data-path="data-manipulation-1.html"><a href="data-manipulation-1.html#question-2-1"><i class="fa fa-check"></i><b>16.1.2</b> Question 2</a></li>
<li class="chapter" data-level="16.1.3" data-path="data-manipulation-1.html"><a href="data-manipulation-1.html#question-3-1"><i class="fa fa-check"></i><b>16.1.3</b> Question 3</a></li>
<li class="chapter" data-level="16.1.4" data-path="data-manipulation-1.html"><a href="data-manipulation-1.html#question-4-1"><i class="fa fa-check"></i><b>16.1.4</b> Question 4</a></li>
<li class="chapter" data-level="16.1.5" data-path="data-manipulation-1.html"><a href="data-manipulation-1.html#question-5-1"><i class="fa fa-check"></i><b>16.1.5</b> Question 5</a></li>
</ul></li>
<li class="chapter" data-level="16.2" data-path="probability-with-dplyr-1.html"><a href="probability-with-dplyr-1.html"><i class="fa fa-check"></i><b>16.2</b> Probability with dplyr</a><ul>
<li class="chapter" data-level="16.2.1" data-path="probability-with-dplyr-1.html"><a href="probability-with-dplyr-1.html#question-6-1"><i class="fa fa-check"></i><b>16.2.1</b> Question 6</a></li>
<li class="chapter" data-level="16.2.2" data-path="probability-with-dplyr-1.html"><a href="probability-with-dplyr-1.html#question-7-1"><i class="fa fa-check"></i><b>16.2.2</b> Question 7</a></li>
<li class="chapter" data-level="16.2.3" data-path="probability-with-dplyr-1.html"><a href="probability-with-dplyr-1.html#question-8-1"><i class="fa fa-check"></i><b>16.2.3</b> Question 8</a></li>
<li class="chapter" data-level="16.2.4" data-path="probability-with-dplyr-1.html"><a href="probability-with-dplyr-1.html#question-9-1"><i class="fa fa-check"></i><b>16.2.4</b> Question 9</a></li>
<li class="chapter" data-level="16.2.5" data-path="probability-with-dplyr-1.html"><a href="probability-with-dplyr-1.html#question-10-1"><i class="fa fa-check"></i><b>16.2.5</b> Question 10</a></li>
</ul></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Psyc 6300: Data Management</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="solutions" class="section level2">
<h2><span class="header-section-number">5.1</span> Solutions</h2>
<p>Below are the solutions for the activity. First I answer each question individually. After that, I use a single dplyr chain to complete the Data Cleaning and Group-level Feature Extraction exercises. For each function call in the chain, I explain what the functions are doing. Note that functions ending in _at(), _all(), or _if are advanced function that save time. The associated base calls are just as appropriate.</p>
<p><strong>Data Cleaning</strong></p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb26-1" title="1"><span class="co"># Preporation work ----------------------</span></a>
<a class="sourceLine" id="cb26-2" title="2"><span class="kw">library</span>(tidyverse)</a>
<a class="sourceLine" id="cb26-3" title="3"></a>
<a class="sourceLine" id="cb26-4" title="4"><span class="co"># Read the data</span></a>
<a class="sourceLine" id="cb26-5" title="5">clinician&lt;-<span class="kw">read_csv</span>(<span class="st">&quot;suppl/clinician.csv&quot;</span>)</a></code></pre></div>
<pre><code>## Warning: Missing column names filled in: &#39;X1&#39; [1]</code></pre>
<ol style="list-style-type: decimal">
<li>Create a dataframe with only the current patients.</li>
</ol>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb28-1" title="1">clean_clinician&lt;-clinician<span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb28-2" title="2"><span class="st">  </span><span class="kw">filter</span>(attrition<span class="op">!=</span><span class="dv">1</span>) <span class="co"># Removing patients that no longer attend therapy (i.e., attrition == 1)</span></a></code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li>Remove irrelevant columns.</li>
</ol>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb29-1" title="1"><span class="co"># Dropping variables with no variance (Pull_Date and</span></a>
<a class="sourceLine" id="cb29-2" title="2"><span class="co"># attrition were the same across each obs)</span></a>
<a class="sourceLine" id="cb29-3" title="3">clean_clinician&lt;-clean_clinician<span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb29-4" title="4"><span class="st">    </span><span class="kw">select</span>(<span class="op">-</span>Pull_Date, <span class="op">-</span>attrition) </a></code></pre></div>
<ol start="3" style="list-style-type: decimal">
<li>Assign meaningful names to all columns.</li>
</ol>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb30-1" title="1"> <span class="co"># renaming to meaningful variables</span></a>
<a class="sourceLine" id="cb30-2" title="2">clean_clinician&lt;-clean_clinician<span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb30-3" title="3"><span class="st">  </span><span class="kw">rename</span>(<span class="dt">beck1 =</span> Q1<span class="fl">.1</span>, <span class="dt">beck2 =</span> Q1<span class="fl">.2</span>, <span class="dt">beck3 =</span> Q1<span class="fl">.3</span>,</a>
<a class="sourceLine" id="cb30-4" title="4">         <span class="dt">swb1 =</span> Q2<span class="fl">.1</span>, <span class="dt">swb2 =</span> Q2<span class="fl">.2</span>, <span class="dt">swb3 =</span> Q2<span class="fl">.3</span>)</a></code></pre></div>
<ol start="4" style="list-style-type: decimal">
<li>Remove observatons that have NO data for Beck Depression Inventory and Subjective Well-Being scales.</li>
</ol>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb31-1" title="1"><span class="co"># Removing observations if all are missing (retaining if responded on any observations)</span></a>
<a class="sourceLine" id="cb31-2" title="2">clean_clinician&lt;-clean_clinician<span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb31-3" title="3"><span class="st">   </span><span class="kw">filter</span>(<span class="op">!</span><span class="kw">is.na</span>(beck1)<span class="op">|!</span><span class="kw">is.na</span>(beck2)<span class="op">|!</span><span class="kw">is.na</span>(beck3)<span class="op">|</span></a>
<a class="sourceLine" id="cb31-4" title="4"><span class="st">            </span><span class="op">!</span><span class="kw">is.na</span>(swb1)<span class="op">|!</span><span class="kw">is.na</span>(swb2)<span class="op">|!</span><span class="kw">is.na</span>(swb3)) </a></code></pre></div>
<ol start="5" style="list-style-type: decimal">
<li>Create scale scores using arithmetic operators.</li>
</ol>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb32-1" title="1"> <span class="co">#Creating a new column called beck_arith using arithmetic methods for means</span></a>
<a class="sourceLine" id="cb32-2" title="2">clean_clinician&lt;-clean_clinician<span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb32-3" title="3"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">beck_arith =</span> (beck1<span class="op">+</span>beck2<span class="op">+</span>beck3)<span class="op">/</span><span class="dv">3</span>, </a>
<a class="sourceLine" id="cb32-4" title="4">         <span class="dt">swb_arith =</span> (swb1<span class="op">+</span>swb2<span class="op">+</span>swb3)<span class="op">/</span><span class="dv">3</span>)</a></code></pre></div>
<ol start="6" style="list-style-type: decimal">
<li>Create scale scores using a method that employs a function to generate the mean.</li>
</ol>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb33-1" title="1">clean_clinician&lt;-clean_clinician<span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb33-2" title="2"><span class="st">  </span><span class="kw">rowwise</span>()<span class="op">%&gt;%</span><span class="st"> </span><span class="co"># Creating scale scores with missing data</span></a>
<a class="sourceLine" id="cb33-3" title="3"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">beck_fun =</span> <span class="kw">mean</span>(<span class="kw">c</span>(beck1, beck2, beck3), <span class="dt">na.rm =</span> <span class="ot">TRUE</span>), </a>
<a class="sourceLine" id="cb33-4" title="4">         <span class="dt">swb_fun =</span> <span class="kw">mean</span>(<span class="kw">c</span>(beck1, beck2, beck3), <span class="dt">na.rm =</span> <span class="ot">TRUE</span>))<span class="op">%&gt;%</span><span class="st"> </span><span class="co"># Using function for means</span></a>
<a class="sourceLine" id="cb33-5" title="5"><span class="st">  </span><span class="kw">ungroup</span>()<span class="co"># always making sure to ungroup</span></a></code></pre></div>
<ol start="7" style="list-style-type: decimal">
<li>Create a varaible that stores the depression CDF for each participant.</li>
</ol>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb34-1" title="1"><span class="co"># creating a new variable that contains the cdf for becks depression inventory</span></a>
<a class="sourceLine" id="cb34-2" title="2">clean_clinician&lt;-clean_clinician<span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb34-3" title="3"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">dep_cdf =</span> <span class="kw">cume_dist</span>(beck_fun)) </a></code></pre></div>
<p><strong>Group-Level Feature Extraction</strong></p>
<ol style="list-style-type: decimal">
<li>Create a variable that stores therapist-level depression scores for each participant</li>
</ol>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb35-1" title="1">clean_clinician&lt;-clean_clinician<span class="op">%&gt;%</span><span class="st"> </span><span class="co"># Using the cleaned data overwrite clean data.</span></a>
<a class="sourceLine" id="cb35-2" title="2"><span class="st">    </span><span class="kw">group_by</span>(Therapist)<span class="op">%&gt;%</span><span class="st"> </span><span class="co"># group the data by Therapist</span></a>
<a class="sourceLine" id="cb35-3" title="3"><span class="st">    </span><span class="kw">mutate</span>(<span class="dt">dep_cdf_grp =</span> <span class="kw">mean</span>(beck_fun, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>))<span class="op">%&gt;%</span><span class="st"> </span><span class="co"># calculate the cdf by group</span></a>
<a class="sourceLine" id="cb35-4" title="4"><span class="st">    </span><span class="kw">ungroup</span>()</a></code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li>Create a variable that stores therapist-level attrition rate.</li>
</ol>
<p>Attrtion rate is no longer stored in this data. We deselected it above. Below, I show how to use join to add it to the cleaned data. A more efficient way would be to create the attr_count variable before I filtered out former patients. (i.e., add_count(Therapist, attrition, name = "attr_count)), but this is a good opportunity to using a join function.</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb36-1" title="1"><span class="co"># Counting the number of patients that stopped comming to each clinician</span></a>
<a class="sourceLine" id="cb36-2" title="2"> attr_rate&lt;-clinician<span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb36-3" title="3"><span class="st">   </span><span class="kw">count</span>(Therapist, attrition, <span class="dt">name =</span> <span class="st">&quot;attr_count&quot;</span>) </a>
<a class="sourceLine" id="cb36-4" title="4"></a>
<a class="sourceLine" id="cb36-5" title="5"><span class="co"># Joining the new attrition count data with the cleaned data</span></a>
<a class="sourceLine" id="cb36-6" title="6"> clean_clinician&lt;-<span class="kw">left_join</span>(clean_clinician, attr_rate) </a></code></pre></div>
<p><strong>Summary Statistics</strong></p>
<ol style="list-style-type: decimal">
<li>Create a separate data frame that summarises the sample’s central tendency (i.e., mean and median) and spread (i.e., variance, standard deviation, and mad).</li>
</ol>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb37-1" title="1"><span class="co"># Notice how a lot of code is repeated. Cases like this is when summarise_if or _at come in handy. See later chapters</span></a>
<a class="sourceLine" id="cb37-2" title="2">summary_stat&lt;-clean_clinician<span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb37-3" title="3"><span class="st">   </span><span class="kw">select</span>(beck_fun, swb_fun, recovery)<span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb37-4" title="4"><span class="st">   </span><span class="kw">summarise</span>(<span class="dt">beck_fun_m =</span> <span class="kw">mean</span>(beck_fun, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>), <span class="co"># Creating BECK Central Tendency Summaries</span></a>
<a class="sourceLine" id="cb37-5" title="5">             <span class="dt">beck_fun_med =</span> <span class="kw">median</span>(beck_fun, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>), </a>
<a class="sourceLine" id="cb37-6" title="6">             <span class="dt">beck_fun_sd =</span> <span class="kw">sd</span>(beck_fun, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>), <span class="co"># Creating BECK Spread Summaries</span></a>
<a class="sourceLine" id="cb37-7" title="7">             <span class="dt">beck_fun_var =</span> <span class="kw">var</span>(beck_fun, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>), </a>
<a class="sourceLine" id="cb37-8" title="8">             <span class="dt">beck_fun_mad =</span> <span class="kw">mad</span>(beck_fun, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),</a>
<a class="sourceLine" id="cb37-9" title="9">             <span class="dt">swb_fun_m =</span> <span class="kw">mean</span>(swb_fun, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>), <span class="co"># Creating Central Tendency Summaries</span></a>
<a class="sourceLine" id="cb37-10" title="10">             <span class="dt">swb_fun_med =</span> <span class="kw">median</span>(swb_fun, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>), </a>
<a class="sourceLine" id="cb37-11" title="11">             <span class="dt">swb_fun_sd =</span> <span class="kw">sd</span>(swb_fun, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>), <span class="co"># Creating Spread Summaries</span></a>
<a class="sourceLine" id="cb37-12" title="12">             <span class="dt">swb_fun_var =</span> <span class="kw">var</span>(swb_fun, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>), </a>
<a class="sourceLine" id="cb37-13" title="13">             <span class="dt">swb_fun_mad =</span> <span class="kw">mad</span>(swb_fun, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),</a>
<a class="sourceLine" id="cb37-14" title="14">             <span class="dt">rec_fun_m =</span> <span class="kw">mean</span>(recovery, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>), <span class="co"># Creating Central Tendency Summaries</span></a>
<a class="sourceLine" id="cb37-15" title="15">             <span class="dt">rec_fun_med =</span> <span class="kw">median</span>(recovery, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>), </a>
<a class="sourceLine" id="cb37-16" title="16">             <span class="dt">rec_fun_sd =</span> <span class="kw">sd</span>(recovery, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>), <span class="co"># Creating Spread Summaries</span></a>
<a class="sourceLine" id="cb37-17" title="17">             <span class="dt">rec_fun_var =</span> <span class="kw">var</span>(recovery, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>), </a>
<a class="sourceLine" id="cb37-18" title="18">             <span class="dt">rec_fun_mad =</span> <span class="kw">mad</span>(recovery, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb37-19" title="19">             )</a>
<a class="sourceLine" id="cb37-20" title="20"></a>
<a class="sourceLine" id="cb37-21" title="21"></a>
<a class="sourceLine" id="cb37-22" title="22">summary_stat</a></code></pre></div>
<pre><code>## # A tibble: 1 x 15
##   beck_fun_m beck_fun_med beck_fun_sd beck_fun_var beck_fun_mad swb_fun_m
##        &lt;dbl&gt;        &lt;dbl&gt;       &lt;dbl&gt;        &lt;dbl&gt;        &lt;dbl&gt;     &lt;dbl&gt;
## 1       4.19         4.33        1.40         1.95         1.48      4.19
## # ... with 9 more variables: swb_fun_med &lt;dbl&gt;, swb_fun_sd &lt;dbl&gt;,
## #   swb_fun_var &lt;dbl&gt;, swb_fun_mad &lt;dbl&gt;, rec_fun_m &lt;dbl&gt;,
## #   rec_fun_med &lt;dbl&gt;, rec_fun_sd &lt;dbl&gt;, rec_fun_var &lt;dbl&gt;,
## #   rec_fun_mad &lt;dbl&gt;</code></pre>
<ol start="2" style="list-style-type: decimal">
<li>Create an identical table, except calculate these summary statistics across therapists.</li>
</ol>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb39-1" title="1">grouped_stats&lt;-clean_clinician<span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb39-2" title="2"><span class="st">  </span><span class="kw">group_by</span>(Therapist)<span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb39-3" title="3"><span class="st">   </span><span class="kw">select</span>(beck_fun, swb_fun, recovery)<span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb39-4" title="4"><span class="st">   </span><span class="kw">summarise</span>(<span class="dt">beck_fun_m =</span> <span class="kw">mean</span>(beck_fun, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>), <span class="co"># Creating BECK Central Tendency Summaries</span></a>
<a class="sourceLine" id="cb39-5" title="5">             <span class="dt">beck_fun_med =</span> <span class="kw">median</span>(beck_fun, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>), </a>
<a class="sourceLine" id="cb39-6" title="6">             <span class="dt">beck_fun_sd =</span> <span class="kw">sd</span>(beck_fun, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>), <span class="co"># Creating BECK Spread Summaries</span></a>
<a class="sourceLine" id="cb39-7" title="7">             <span class="dt">beck_fun_var =</span> <span class="kw">var</span>(beck_fun, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>), </a>
<a class="sourceLine" id="cb39-8" title="8">             <span class="dt">beck_fun_mad =</span> <span class="kw">mad</span>(beck_fun, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),</a>
<a class="sourceLine" id="cb39-9" title="9">             <span class="dt">swb_fun_m =</span> <span class="kw">mean</span>(swb_fun, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>), <span class="co"># Creating Central Tendency Summaries</span></a>
<a class="sourceLine" id="cb39-10" title="10">             <span class="dt">swb_fun_med =</span> <span class="kw">median</span>(swb_fun, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>), </a>
<a class="sourceLine" id="cb39-11" title="11">             <span class="dt">swb_fun_sd =</span> <span class="kw">sd</span>(swb_fun, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>), <span class="co"># Creating Spread Summaries</span></a>
<a class="sourceLine" id="cb39-12" title="12">             <span class="dt">swb_fun_var =</span> <span class="kw">var</span>(swb_fun, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>), </a>
<a class="sourceLine" id="cb39-13" title="13">             <span class="dt">swb_fun_mad =</span> <span class="kw">mad</span>(swb_fun, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),</a>
<a class="sourceLine" id="cb39-14" title="14">             <span class="dt">rec_m =</span> <span class="kw">mean</span>(recovery, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>), <span class="co"># Creating Central Tendency Summaries</span></a>
<a class="sourceLine" id="cb39-15" title="15">             <span class="dt">rec_med =</span> <span class="kw">median</span>(recovery, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>), </a>
<a class="sourceLine" id="cb39-16" title="16">             <span class="dt">rec_sd =</span> <span class="kw">sd</span>(recovery, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>), <span class="co"># Creating Spread Summaries</span></a>
<a class="sourceLine" id="cb39-17" title="17">             <span class="dt">rec_var =</span> <span class="kw">var</span>(recovery, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>), </a>
<a class="sourceLine" id="cb39-18" title="18">             <span class="dt">rec_mad =</span> <span class="kw">mad</span>(recovery, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb39-19" title="19">             )</a>
<a class="sourceLine" id="cb39-20" title="20"></a>
<a class="sourceLine" id="cb39-21" title="21"></a>
<a class="sourceLine" id="cb39-22" title="22">grouped_stats</a></code></pre></div>
<pre><code>## # A tibble: 5 x 16
##   Therapist beck_fun_m beck_fun_med beck_fun_sd beck_fun_var beck_fun_mad
##   &lt;chr&gt;          &lt;dbl&gt;        &lt;dbl&gt;       &lt;dbl&gt;        &lt;dbl&gt;        &lt;dbl&gt;
## 1 Blaine          3.97         4           1.43         2.04         1.48
## 2 Dustin          4.21         4.33        1.41         2.00         1.48
## 3 Nikola          4.29         4.33        1.34         1.80         1.48
## 4 Ricardo         4.18         4.33        1.32         1.75         1.48
## 5 Samantha        4.28         4.33        1.46         2.12         1.48
## # ... with 10 more variables: swb_fun_m &lt;dbl&gt;, swb_fun_med &lt;dbl&gt;,
## #   swb_fun_sd &lt;dbl&gt;, swb_fun_var &lt;dbl&gt;, swb_fun_mad &lt;dbl&gt;, rec_m &lt;dbl&gt;,
## #   rec_med &lt;dbl&gt;, rec_sd &lt;dbl&gt;, rec_var &lt;dbl&gt;, rec_mad &lt;dbl&gt;</code></pre>
<ol start="3" style="list-style-type: decimal">
<li>Which therapist has the highest attrition rate?</li>
</ol>
<p>Attrition couldn’t be calculated from the cleaned data, because we filtered out those observations! Since we have the number of people who stopped attending therapy and the number of people who continued to attend therapy, we can recover that information. Again, this could have been more easily solved by using the original clinician data.</p>
<p>This data suggests that Ricardo has the highest attrition rate.</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb41-1" title="1"> attr_rate&lt;-clean_clinician<span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb41-2" title="2"><span class="st">              </span><span class="kw">group_by</span>(Therapist)<span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb41-3" title="3"><span class="st">              </span><span class="kw">summarise</span>(<span class="dt">attr_rate =</span> <span class="kw">mean</span>(attr_count)<span class="op">/</span>(<span class="kw">mean</span>(attr_count)<span class="op">+</span><span class="kw">n</span>()))<span class="op">%&gt;%</span><span class="st"> </span><span class="co">#Mean can be used because their is no variability within group clinicians.</span></a>
<a class="sourceLine" id="cb41-4" title="4"><span class="st">              </span><span class="kw">arrange</span>(<span class="kw">desc</span>(attr_rate))</a>
<a class="sourceLine" id="cb41-5" title="5"> attr_rate</a></code></pre></div>
<pre><code>## # A tibble: 5 x 2
##   Therapist attr_rate
##   &lt;chr&gt;         &lt;dbl&gt;
## 1 Ricardo       0.254
## 2 Blaine        0.244
## 3 Nikola        0.232
## 4 Samantha      0.228
## 5 Dustin        0.227</code></pre>
<ol start="4" style="list-style-type: decimal">
<li>Which therapist has the highest recovery rate?</li>
</ol>
<p>Because recovery rate is stored as a binary variable (i.e., 1 or 0), the proportion of patients recovered is equal to the average of the recovery column. We calculated this above. It suggests that Blaine has the highes recovery rate.</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb43-1" title="1">grouped_stats<span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb43-2" title="2"><span class="st">  </span><span class="kw">select</span>(Therapist, rec_m)<span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb43-3" title="3"><span class="st">  </span><span class="kw">arrange</span>(<span class="kw">desc</span>(rec_m))</a></code></pre></div>
<pre><code>## # A tibble: 5 x 2
##   Therapist rec_m
##   &lt;chr&gt;     &lt;dbl&gt;
## 1 Blaine    0.618
## 2 Nikola    0.497
## 3 Dustin    0.337
## 4 Samantha  0.336
## 5 Ricardo   0.316</code></pre>
<ol start="5" style="list-style-type: decimal">
<li>Is there an association between the Recrutiment Medium and recovery rate?</li>
</ol>
<p>This was an advanced problem. There are several ways to approach this. I illustrate one method below. Using the cleaned data, I calculate the joint, conditional, and marginal probabilities. If the two variables are independent, the conditional probabilities should approximate the marginal probabilities (i.e., the probability of recovery across recruitment channels is equal to the probabilty of recovering overall)</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb45-1" title="1"><span class="co"># Advanced Question: Calculate joint, conditional, and marginal probabilities </span></a>
<a class="sourceLine" id="cb45-2" title="2"><span class="co">### Conditonal p should approximate marginal if independent</span></a>
<a class="sourceLine" id="cb45-3" title="3"> clean_clinician<span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb45-4" title="4"><span class="st">   </span><span class="kw">count</span>(Recruitment_Channel, recovery)<span class="op">%&gt;%</span><span class="st"> </span><span class="co"># Uses count to count the joint frequency </span></a>
<a class="sourceLine" id="cb45-5" title="5"><span class="st">   </span><span class="kw">group_by</span>(recovery)<span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb45-6" title="6"><span class="st">   </span><span class="kw">mutate</span>(<span class="dt">recovery_mf=</span> <span class="kw">sum</span>(n))<span class="op">%&gt;%</span><span class="st"> </span><span class="co"># Calculates the marginal frequencies of recovering and not recovering</span></a>
<a class="sourceLine" id="cb45-7" title="7"><span class="st">   </span><span class="kw">ungroup</span>()<span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb45-8" title="8"><span class="st">   </span><span class="kw">group_by</span>(Recruitment_Channel)<span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb45-9" title="9"><span class="st">   </span><span class="kw">mutate</span>(<span class="dt">recruitment_mf =</span> <span class="kw">sum</span>(n))<span class="op">%&gt;%</span><span class="st"> </span><span class="co"># Calculates the marginal frequencies of each recruitment channel</span></a>
<a class="sourceLine" id="cb45-10" title="10"><span class="st">   </span><span class="kw">ungroup</span>()<span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb45-11" title="11"><span class="st">   </span><span class="kw">mutate</span>(<span class="dt">p =</span> n<span class="op">/</span><span class="kw">sum</span>(n), <span class="co"># Converting joint frequencies to joint probabilities</span></a>
<a class="sourceLine" id="cb45-12" title="12">          <span class="dt">recovery_mp =</span> recovery_mf<span class="op">/</span><span class="kw">sum</span>(n), <span class="co"># Converting marginal frequencies to marginal probabilities</span></a>
<a class="sourceLine" id="cb45-13" title="13">          <span class="dt">recruitment_mp =</span> recruitment_mf<span class="op">/</span><span class="kw">sum</span>(n))<span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb45-14" title="14"><span class="st">  </span><span class="kw">group_by</span>(Recruitment_Channel)<span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb45-15" title="15"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">recovery_cond_p =</span> n<span class="op">/</span><span class="kw">sum</span>(n))<span class="op">%&gt;%</span><span class="st"> </span><span class="co"># Calculate probability of recovery conditioned on channel </span></a>
<a class="sourceLine" id="cb45-16" title="16"><span class="st">  </span><span class="kw">select</span>(Recruitment_Channel, recovery, p, recovery_mp, recovery_cond_p) <span class="co"># Selecting only probabilities</span></a></code></pre></div>
<pre><code>## # A tibble: 8 x 5
## # Groups:   Recruitment_Channel [4]
##   Recruitment_Channel recovery      p recovery_mp recovery_cond_p
##   &lt;chr&gt;                  &lt;dbl&gt;  &lt;dbl&gt;       &lt;dbl&gt;           &lt;dbl&gt;
## 1 Email                      0 0.156        0.582           0.578
## 2 Email                      1 0.114        0.418           0.422
## 3 Friend Referral            0 0.134        0.582           0.557
## 4 Friend Referral            1 0.107        0.418           0.443
## 5 Google                     0 0.154        0.582           0.639
## 6 Google                     1 0.0867       0.418           0.361
## 7 Medical Referral           0 0.139        0.582           0.557
## 8 Medical Referral           1 0.110        0.418           0.443</code></pre>
<p><strong>Follow-up Quesitons</strong></p>
<ol style="list-style-type: decimal">
<li><p>What was the difference between scale scores generated by arithmetic operators and functions?
They handle missing data differently. mean() has the na.rm option that allows you to calculate an average using all available data.</p></li>
<li><p>Did the information stored within group-level features differ from what was generated using grouped summary statistics?
Nope! They are really generating the same information! The group-level feature extraction just repeats it across observations.</p></li>
<li><p>When would it be useful to store group-level data as a summary table versus a variable in the original data frame?
It is useful to store group-level data when you want to use it in a model. When you want to communicate data, it is more useful to store it in a separate table.</p></li>
</ol>
<p><em>Dplyr Chain with Some Advanced Functions</em></p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb47-1" title="1"><span class="co"># Cleaning Data ----------------------------------------------------------------------------------------------------</span></a>
<a class="sourceLine" id="cb47-2" title="2">clean_clinician&lt;-clinician<span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb47-3" title="3"><span class="st">  </span><span class="kw">filter</span>(attrition<span class="op">!=</span><span class="dv">1</span>)<span class="op">%&gt;%</span><span class="st"> </span><span class="co"># Removing patients that no longer attend therapy (i.e., attrition == 1)</span></a>
<a class="sourceLine" id="cb47-4" title="4"><span class="st">  </span><span class="kw">select</span>(<span class="op">-</span>Pull_Date, <span class="op">-</span>attrition)<span class="op">%&gt;%</span><span class="st"> </span><span class="co"># Dropping variables with no variance (Pull_Date and attrition were the same across each obs)</span></a>
<a class="sourceLine" id="cb47-5" title="5"><span class="st">  </span><span class="kw">rename</span>(<span class="dt">beck1 =</span> Q1<span class="fl">.1</span>, <span class="dt">beck2 =</span> Q1<span class="fl">.2</span>, <span class="dt">beck3 =</span> Q1<span class="fl">.3</span>, <span class="dt">swb1 =</span> Q2<span class="fl">.1</span>, <span class="dt">swb2 =</span> Q2<span class="fl">.2</span>, <span class="dt">swb3 =</span> Q2<span class="fl">.3</span>)<span class="op">%&gt;%</span><span class="st"> </span><span class="co"># renaming to meaningful variables</span></a>
<a class="sourceLine" id="cb47-6" title="6"><span class="st">  </span><span class="kw">filter_at</span>(<span class="dt">.vars =</span> <span class="kw">vars</span>(beck1, beck2, beck3, swb1, swb2, swb3), <span class="dt">.vars_predicate =</span> <span class="kw">any_vars</span>(<span class="op">!</span><span class="kw">is.na</span>(.)))<span class="op">%&gt;%</span><span class="st"> </span><span class="co"># Removing observations if all are missing (retaining if responded on any observations)</span></a>
<a class="sourceLine" id="cb47-7" title="7"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">beck_arith =</span> (beck1<span class="op">+</span>beck2<span class="op">+</span>beck3)<span class="op">/</span><span class="dv">3</span>, <span class="dt">swb_arith =</span> (swb1<span class="op">+</span>swb2<span class="op">+</span>swb3)<span class="op">/</span><span class="dv">3</span>)<span class="op">%&gt;%</span><span class="st"> </span><span class="co">#Using arithmetic methods for means</span></a>
<a class="sourceLine" id="cb47-8" title="8"><span class="st">  </span><span class="kw">rowwise</span>()<span class="op">%&gt;%</span><span class="st"> </span><span class="co"># Creating scale scores with missing data</span></a>
<a class="sourceLine" id="cb47-9" title="9"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">beck_fun =</span> <span class="kw">mean</span>(<span class="kw">c</span>(beck1, beck2, beck3), <span class="dt">na.rm =</span> <span class="ot">TRUE</span>), <span class="dt">swb_fun =</span> <span class="kw">mean</span>(<span class="kw">c</span>(beck1, beck2, beck3), <span class="dt">na.rm =</span> <span class="ot">TRUE</span>))<span class="op">%&gt;%</span><span class="st"> </span><span class="co"># Using function for means</span></a>
<a class="sourceLine" id="cb47-10" title="10"><span class="st">  </span><span class="kw">ungroup</span>()<span class="op">%&gt;%</span><span class="st"> </span><span class="co"># always making sure to ungroup</span></a>
<a class="sourceLine" id="cb47-11" title="11"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">dep_cdf =</span> <span class="kw">cume_dist</span>(beck_fun)) <span class="co"># creating a new variable that contains the cdf for becks depression inventory</span></a>
<a class="sourceLine" id="cb47-12" title="12"></a>
<a class="sourceLine" id="cb47-13" title="13"><span class="co"># Extracting Group-level Features -------------------------------------------------------------------------------------</span></a>
<a class="sourceLine" id="cb47-14" title="14"> clean_clinician&lt;-clean_clinician<span class="op">%&gt;%</span><span class="st"> </span><span class="co"># Using the cleaned data overwrite clean data.</span></a>
<a class="sourceLine" id="cb47-15" title="15"><span class="st">    </span><span class="kw">group_by</span>(Therapist)<span class="op">%&gt;%</span><span class="st"> </span><span class="co"># group the data by Therapist</span></a>
<a class="sourceLine" id="cb47-16" title="16"><span class="st">    </span><span class="kw">mutate</span>(<span class="dt">dep_cdf_grp =</span> <span class="kw">mean</span>(beck_fun, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>))<span class="op">%&gt;%</span><span class="st"> </span><span class="co"># calculate the cdf by group</span></a>
<a class="sourceLine" id="cb47-17" title="17"><span class="st">    </span><span class="kw">ungroup</span>()</a>
<a class="sourceLine" id="cb47-18" title="18"></a>
<a class="sourceLine" id="cb47-19" title="19"> <span class="co"># Attrtion rate is no longer stored in this data. Below I show how to use join to add it to the cleaned data</span></a>
<a class="sourceLine" id="cb47-20" title="20"> <span class="co"># A more efficient way would be to create the attr_count variable before I filtered (i.e., add_count(Therapist, attrition, name = &quot;attr_count)), but this is a good opportunity to using a join function</span></a>
<a class="sourceLine" id="cb47-21" title="21"></a>
<a class="sourceLine" id="cb47-22" title="22"> attr_rate&lt;-clinician<span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb47-23" title="23"><span class="st">   </span><span class="kw">count</span>(Therapist, attrition, <span class="dt">name =</span> <span class="st">&quot;attr_count&quot;</span>) <span class="co"># Counting the number of patients that stopped comming to each clinician</span></a>
<a class="sourceLine" id="cb47-24" title="24"></a>
<a class="sourceLine" id="cb47-25" title="25"> clean_clinician&lt;-<span class="kw">left_join</span>(clean_clinician, attr_rate) <span class="co"># Joining the new attrition count data with the cleaned data</span></a>
<a class="sourceLine" id="cb47-26" title="26"> </a>
<a class="sourceLine" id="cb47-27" title="27"> <span class="co"># Summary Tables -------------------------------------------------------------------------------------------------</span></a>
<a class="sourceLine" id="cb47-28" title="28"> </a>
<a class="sourceLine" id="cb47-29" title="29"> <span class="co">## summarise_all is useful, and depicted here, but summary() is equally acceptible!</span></a>
<a class="sourceLine" id="cb47-30" title="30">  summary_stat&lt;-clean_clinician<span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb47-31" title="31"><span class="st">   </span><span class="kw">select</span>(beck_fun, swb_fun, recovery)<span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb47-32" title="32"><span class="st">   </span><span class="kw">summarise_all</span>(<span class="dt">.funs =</span> <span class="kw">list</span>(<span class="dt">m =</span> <span class="op">~</span><span class="kw">mean</span>(., <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),</a>
<a class="sourceLine" id="cb47-33" title="33">                              <span class="dt">med =</span> <span class="op">~</span><span class="kw">median</span>(., <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),</a>
<a class="sourceLine" id="cb47-34" title="34">                              <span class="dt">sd =</span> <span class="op">~</span><span class="kw">sd</span>(., <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),</a>
<a class="sourceLine" id="cb47-35" title="35">                              <span class="dt">var =</span> <span class="op">~</span><span class="kw">var</span>(., <span class="dt">na.rm =</span> <span class="ot">TRUE</span>), </a>
<a class="sourceLine" id="cb47-36" title="36">                              <span class="dt">mad =</span> <span class="op">~</span><span class="kw">mad</span>(., <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)))</a>
<a class="sourceLine" id="cb47-37" title="37"> </a>
<a class="sourceLine" id="cb47-38" title="38"> grouped_summary&lt;-clean_clinician<span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb47-39" title="39"><span class="st">   </span><span class="kw">select</span>(Therapist, beck_fun, swb_fun, recovery)<span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb47-40" title="40"><span class="st">   </span><span class="kw">group_by</span>(Therapist)<span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb47-41" title="41"><span class="st">   </span><span class="kw">summarise_all</span>(<span class="dt">.funs =</span> <span class="kw">list</span>(<span class="dt">m =</span> <span class="op">~</span><span class="kw">mean</span>(., <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),</a>
<a class="sourceLine" id="cb47-42" title="42">                              <span class="dt">med =</span> <span class="op">~</span><span class="kw">median</span>(., <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),</a>
<a class="sourceLine" id="cb47-43" title="43">                              <span class="dt">sd =</span> <span class="op">~</span><span class="kw">sd</span>(., <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),</a>
<a class="sourceLine" id="cb47-44" title="44">                              <span class="dt">var =</span> <span class="op">~</span><span class="kw">var</span>(., <span class="dt">na.rm =</span> <span class="ot">TRUE</span>), </a>
<a class="sourceLine" id="cb47-45" title="45">                              <span class="dt">mad =</span> <span class="op">~</span><span class="kw">mad</span>(., <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)))</a>
<a class="sourceLine" id="cb47-46" title="46"> </a>
<a class="sourceLine" id="cb47-47" title="47"> </a>
<a class="sourceLine" id="cb47-48" title="48">  <span class="co"># Printing both summaries</span></a>
<a class="sourceLine" id="cb47-49" title="49">  summary_stat</a></code></pre></div>
<pre><code>## # A tibble: 1 x 15
##   beck_fun_m swb_fun_m recovery_m beck_fun_med swb_fun_med recovery_med
##        &lt;dbl&gt;     &lt;dbl&gt;      &lt;dbl&gt;        &lt;dbl&gt;       &lt;dbl&gt;        &lt;dbl&gt;
## 1       4.19      4.19      0.418         4.33        4.33            0
## # ... with 9 more variables: beck_fun_sd &lt;dbl&gt;, swb_fun_sd &lt;dbl&gt;,
## #   recovery_sd &lt;dbl&gt;, beck_fun_var &lt;dbl&gt;, swb_fun_var &lt;dbl&gt;,
## #   recovery_var &lt;dbl&gt;, beck_fun_mad &lt;dbl&gt;, swb_fun_mad &lt;dbl&gt;,
## #   recovery_mad &lt;dbl&gt;</code></pre>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb49-1" title="1">  grouped_summary</a></code></pre></div>
<pre><code>## # A tibble: 5 x 16
##   Therapist beck_fun_m swb_fun_m recovery_m beck_fun_med swb_fun_med
##   &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt;      &lt;dbl&gt;        &lt;dbl&gt;       &lt;dbl&gt;
## 1 Blaine          3.97      3.97      0.618         4           4   
## 2 Dustin          4.21      4.21      0.337         4.33        4.33
## 3 Nikola          4.29      4.29      0.497         4.33        4.33
## 4 Ricardo         4.18      4.18      0.316         4.33        4.33
## 5 Samantha        4.28      4.28      0.336         4.33        4.33
## # ... with 10 more variables: recovery_med &lt;dbl&gt;, beck_fun_sd &lt;dbl&gt;,
## #   swb_fun_sd &lt;dbl&gt;, recovery_sd &lt;dbl&gt;, beck_fun_var &lt;dbl&gt;,
## #   swb_fun_var &lt;dbl&gt;, recovery_var &lt;dbl&gt;, beck_fun_mad &lt;dbl&gt;,
## #   swb_fun_mad &lt;dbl&gt;, recovery_mad &lt;dbl&gt;</code></pre>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb51-1" title="1"> <span class="co"># Attrition couldn&#39;t be calculated like recovery rate using the mean function because we filtered out those observations! </span></a>
<a class="sourceLine" id="cb51-2" title="2"> <span class="co">#Since we have the number of people who stopped attending therapy and the number of people who continued to attend therapy, we can recover that information. </span></a>
<a class="sourceLine" id="cb51-3" title="3"> <span class="co"># Again, this could have been more easily solved by using the original clinician information. </span></a>
<a class="sourceLine" id="cb51-4" title="4"> <span class="co"># It had to be calculated separately</span></a>
<a class="sourceLine" id="cb51-5" title="5">  </a>
<a class="sourceLine" id="cb51-6" title="6"> attr_rate&lt;-clean_clinician<span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb51-7" title="7"><span class="st">              </span><span class="kw">group_by</span>(Therapist)<span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb51-8" title="8"><span class="st">              </span><span class="kw">summarise</span>(<span class="dt">attr_rate =</span> <span class="kw">mean</span>(attr_count)<span class="op">/</span>(<span class="kw">mean</span>(attr_count)<span class="op">+</span><span class="kw">n</span>()))</a>
<a class="sourceLine" id="cb51-9" title="9">   </a>
<a class="sourceLine" id="cb51-10" title="10"> attr_rate</a></code></pre></div>
<pre><code>## # A tibble: 5 x 2
##   Therapist attr_rate
##   &lt;chr&gt;         &lt;dbl&gt;
## 1 Blaine        0.244
## 2 Dustin        0.227
## 3 Nikola        0.232
## 4 Ricardo       0.254
## 5 Samantha      0.228</code></pre>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb53-1" title="1"> <span class="co"># Based on this information Ricardo has the highest attrition rate</span></a>
<a class="sourceLine" id="cb53-2" title="2"> attr_rate<span class="op">%&gt;%</span><span class="st"> </span><span class="co"># Using attr_rate data</span></a>
<a class="sourceLine" id="cb53-3" title="3"><span class="st">   </span><span class="kw">select</span>(Therapist, attr_rate)<span class="op">%&gt;%</span><span class="st"> </span><span class="co"># select the Therapist and attr_rate columns</span></a>
<a class="sourceLine" id="cb53-4" title="4"><span class="st">   </span><span class="kw">arrange</span>(<span class="kw">desc</span>(attr_rate)) <span class="co"># sore attr_rate column in descending order</span></a></code></pre></div>
<pre><code>## # A tibble: 5 x 2
##   Therapist attr_rate
##   &lt;chr&gt;         &lt;dbl&gt;
## 1 Ricardo       0.254
## 2 Blaine        0.244
## 3 Nikola        0.232
## 4 Samantha      0.228
## 5 Dustin        0.227</code></pre>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb55-1" title="1"> <span class="co"># Blaine has this highest recovery rate</span></a>
<a class="sourceLine" id="cb55-2" title="2">  grouped_summary<span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb55-3" title="3"><span class="st">    </span><span class="kw">select</span>(Therapist, recovery_m)<span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb55-4" title="4"><span class="st">    </span><span class="kw">arrange</span>(<span class="kw">desc</span>(recovery_m))</a></code></pre></div>
<pre><code>## # A tibble: 5 x 2
##   Therapist recovery_m
##   &lt;chr&gt;          &lt;dbl&gt;
## 1 Blaine         0.618
## 2 Nikola         0.497
## 3 Dustin         0.337
## 4 Samantha       0.336
## 5 Ricardo        0.316</code></pre>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb57-1" title="1"> <span class="co"># Relationship between Recruitment Channel and Recovery? -----------------------------------------------  </span></a>
<a class="sourceLine" id="cb57-2" title="2"> clean_clinician<span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb57-3" title="3"><span class="st">   </span><span class="kw">count</span>(Recruitment_Channel, recovery)<span class="op">%&gt;%</span><span class="st"> </span><span class="co"># Uses count to count the joint frequency </span></a>
<a class="sourceLine" id="cb57-4" title="4"><span class="st">   </span><span class="kw">group_by</span>(recovery)<span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb57-5" title="5"><span class="st">   </span><span class="kw">mutate</span>(<span class="dt">recovery_mf=</span> <span class="kw">sum</span>(n))<span class="op">%&gt;%</span><span class="st"> </span><span class="co"># Calculates the marginal frequencies of recovering and not recovering</span></a>
<a class="sourceLine" id="cb57-6" title="6"><span class="st">   </span><span class="kw">ungroup</span>()<span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb57-7" title="7"><span class="st">   </span><span class="kw">group_by</span>(Recruitment_Channel)<span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb57-8" title="8"><span class="st">   </span><span class="kw">mutate</span>(<span class="dt">recruitment_mf =</span> <span class="kw">sum</span>(n))<span class="op">%&gt;%</span><span class="st"> </span><span class="co"># Calculates the marginal frequencies of each recruitment channel</span></a>
<a class="sourceLine" id="cb57-9" title="9"><span class="st">   </span><span class="kw">ungroup</span>()<span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb57-10" title="10"><span class="st">   </span><span class="kw">mutate</span>(<span class="dt">p =</span> n<span class="op">/</span><span class="kw">sum</span>(n), <span class="co"># Converting joint frequencies to joint probabilities</span></a>
<a class="sourceLine" id="cb57-11" title="11">          <span class="dt">recovery_mp =</span> recovery_mf<span class="op">/</span><span class="kw">sum</span>(n), <span class="co"># Converting marginal frequencies to marginal probabilities</span></a>
<a class="sourceLine" id="cb57-12" title="12">          <span class="dt">recruitment_mp =</span> recruitment_mf<span class="op">/</span><span class="kw">sum</span>(n))<span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb57-13" title="13"><span class="st">  </span><span class="kw">group_by</span>(Recruitment_Channel)<span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb57-14" title="14"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">recovery_cond_p =</span> n<span class="op">/</span><span class="kw">sum</span>(n))<span class="op">%&gt;%</span><span class="st"> </span><span class="co"># Calculate probability of recovery conditioned on channel </span></a>
<a class="sourceLine" id="cb57-15" title="15"><span class="st">  </span><span class="kw">select</span>(Recruitment_Channel, recovery, p, recovery_mp, recovery_cond_p) <span class="co"># Selecting only probabilities</span></a></code></pre></div>
<pre><code>## # A tibble: 8 x 5
## # Groups:   Recruitment_Channel [4]
##   Recruitment_Channel recovery      p recovery_mp recovery_cond_p
##   &lt;chr&gt;                  &lt;dbl&gt;  &lt;dbl&gt;       &lt;dbl&gt;           &lt;dbl&gt;
## 1 Email                      0 0.156        0.582           0.578
## 2 Email                      1 0.114        0.418           0.422
## 3 Friend Referral            0 0.134        0.582           0.557
## 4 Friend Referral            1 0.107        0.418           0.443
## 5 Google                     0 0.154        0.582           0.639
## 6 Google                     1 0.0867       0.418           0.361
## 7 Medical Referral           0 0.139        0.582           0.557
## 8 Medical Referral           1 0.110        0.418           0.443</code></pre>

</div>
<!-- </div> -->



            </section>

          </div>
        </div>
      </div>
<a href="activity.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="combining-data-sets.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"download": ["Introduction_to_R.pdf", "Introduction_to_R.epub"],
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
